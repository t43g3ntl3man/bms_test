!function(e,t,n){var r;"function"==typeof define&&define.amd?define(function(){return{LiveForm:t(e),Nette:n(e)}}):"object"==typeof exports?module.exports={LiveForm:t(e),Nette:n(e)}:(e.LiveForm=t(e),r=!e.Nette||!e.Nette.noInit,e.Nette=n(e),r&&e.Nette.initOnLoad())}("undefined"!=typeof window?window:this,function(r){"use strict";var e={options:{showMessageClassOnParent:"form-group",messageParentClass:!1,controlErrorClass:"has-error",controlValidClass:"has-success",messageErrorClass:"help-block text-danger",enableHiddenMessageClass:"show-hidden-error",disableLiveValidationClass:"no-live-validation",disableShowValidClass:"no-show-valid",messageTag:"span",messageIdPostfix:"_message",messageErrorPrefix:'&nbsp;<i class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></i>&nbsp;',showAllErrors:!0,showValid:!1,wait:!1,focusScreenOffsetY:!1},forms:{},setOptions:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(this.options,t)&&(this.options[t]=e[t])}};return void 0!==r.LiveFormOptions&&e.setOptions(r.LiveFormOptions),e.isSpecialKey=function(e){return 20==e||16==e||9==e||27==e||17==e||91==e||19==e||18==e||93==e||35<=e&&e<=40||45==e||33<=e&&e<=34||112<=e&&e<=123||144<=e&&e<=145},e.setupHandlers=function(e){var t,n;this.hasClass(e,this.options.disableLiveValidationClass)||e.getAttribute("data-lfv-initialized")||(e.setAttribute("data-lfv-initialized","true"),n=this,e.addEventListener("change",t=function(e){e=e||r.event,Nette.validateControl(e.target||e.srcElement)}),e.addEventListener("blur",t),e.addEventListener("keydown",function(e){!n.isSpecialKey(e.which)&&(!1===n.options.wait||200<=n.options.wait)&&(n.removeClass(n.getGroupElement(this),n.options.controlErrorClass),n.removeClass(n.getGroupElement(this),n.options.controlValidClass),(e=n.getMessageElement(this)).innerHTML="",e.className="",n.timeout&&clearTimeout(n.timeout))}),e.addEventListener("keyup",function(e){!1!==n.options.wait&&9!==(e=e||r.event).keyCode&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){t(e)},n.options.wait))}))},e.processServerErrors=function(e){for(var t,n=this.getMessageElement(e),r=this.getMessageParent(e),a=[],i=r.getElementsByClassName(this.options.messageErrorClass),o=i.length-1;-1<o;o--)i[o]==n||(t=i[o].parentNode)==r&&(a.push(i[o].outerHTML),t.removeChild(i[o]));0<a.length&&(n.innerHTML=a.join(""))},e.addError=function(e,t){var n;this.hasClass(e,this.options.disableLiveValidationClass)||(n=this.getGroupElement(e),this.setFormProperty(e.form,"hasError",!0),this.addClass(n,this.options.controlErrorClass),this.options.showValid&&this.removeClass(n,this.options.controlValidClass),t=t?this.options.messageErrorPrefix+t:"&nbsp;",(n=this.getMessageElement(e)).innerHTML=t,n.className=this.options.messageErrorClass)},e.removeError=function(e){var t,n;this.getFormProperty(e.form,"onLoadValidation")||(t=this.getGroupElement(e),this.removeClass(t,this.options.controlErrorClass),e.getAttribute("data-lfv-message-id")&&((n=this.getMessageElement(e)).innerHTML="",n.className=""),this.options.showValid&&(this.showValid(e)?this.addClass(t,this.options.controlValidClass):this.removeClass(t,this.options.controlValidClass)))},e.showValid=function(e){if(e.type){var t=e.type.toLowerCase();if("checkbox"==t||"radio"==t)return!1}t=JSON.parse(e.getAttribute("data-nette-rules"));return null!==t&&0!=t.length&&(""!=Nette.getEffectiveValue(e)&&!this.hasClass(e,this.options.disableShowValidClass))},e.getGroupElement=function(e){if(!1===this.options.showMessageClassOnParent)return e;for(var t=e;!this.hasClass(t,this.options.showMessageClassOnParent);)if(null===(t=t.parentNode))return e;return t},e.getMessageId=function(e){for(var t,n=e.id+this.options.messageIdPostfix,r=(!e.name||e.id&&e.form.elements[e.name].tagName||(t=e.name.match(/\[\]$/)?e.name.match(/(.*)\[\]$/)[1]:e.name,n=(e.form.id||"frm")+"-"+t+this.options.messageIdPostfix),n),a=0;document.getElementById(r);)r=r+"_"+ ++a;return r},e.getMessageElement=function(e){var t=(e=e.name&&e.name.match(/\[\]$/)?e.form.elements[e.name].tagName?e:e.form.elements[e.name][0]:e).getAttribute("data-lfv-message-id"),n=(t||(t=this.getMessageId(e),e.setAttribute("data-lfv-message-id",t)),document.getElementById(t));return n||((n=document.createElement(this.options.messageTag)).id=t,"none"!=e.style.display||this.hasClass(e,this.options.enableHiddenMessageClass)||(n.style.display="none"),(t=this.getMessageParent(e))===e.parentNode?t.insertBefore(n,e.nextSibling):t&&("function"==typeof t.append?t.append(n):t.appendChild(n))),n},e.getMessageParent=function(e){var t,n=e.parentNode,r=!1;if(!1!==this.options.messageParentClass)for(r=!0;!this.hasClass(n,this.options.messageParentClass);)if(null===(n=n.parentNode)){n=e.parentNode,r=!1;break}return e.type&&("checkbox"!=(t=e.type.toLowerCase())&&"radio"!=t||"LABEL"!=n.tagName||(n=n.parentNode)),n=r||!e.name||e.form.elements[e.name].tagName?n:n.parentNode},e.addClass=function(e,t){e.className?this.hasClass(e,t)||(e.className+=" "+t):e.className=t},e.hasClass=function(e,t){return!!e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},e.removeClass=function(e,t){var n;this.hasClass(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),n=e.className.match(t),e.className=e.className.replace(t," "==n[1]&&" "==n[2]?" ":""))},e.getFormProperty=function(e,t){return null!=e&&null!=this.forms[e.id]&&this.forms[e.id][t]},e.setFormProperty=function(e,t,n){null!=e&&(null==this.forms[e.id]&&(this.forms[e.id]={}),this.forms[e.id][t]=n)},e},function(s){"use strict";var y={},r={},F={};return y.version="3.0",y.onDocumentReady=function(e){"loading"!==document.readyState?e.call(this):document.addEventListener("DOMContentLoaded",e)},y.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n):"DOMContentLoaded"===t?e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&n.call(this)}):e.attachEvent("on"+t,getHandler(n))},y.getValue=function(e){if(e){if(e.tagName){if("radio"===e.type){for(var t=e.form.elements,n=0;n<t.length;n++)if(t[n].name===e.name&&t[n].checked)return t[n].value;return null}if("file"===e.type)return e.files||e.value;if("select"===e.tagName.toLowerCase()){var r=e.selectedIndex,a=e.options,i=[];if("select-one"===e.type)return r<0?null:a[r].value;for(n=0;n<a.length;n++)a[n].selected&&i.push(a[n].value);return i}if(e.name&&e.name.match(/\[\]$/)){for(t=e.form.elements[e.name].tagName?[e]:e.form.elements[e.name],i=[],n=0;n<t.length;n++){var o=t[n].value;("checkbox"===t[n].type&&t[n].checked||"checkbox"!==t[n].type&&""!==o)&&i.push(o)}return i}return"checkbox"===e.type?e.checked:"textarea"===e.tagName.toLowerCase()?e.value.replace("\r",""):e.value.replace("\r","").replace(/^\s+|\s+$/g,"")}return e[0]?y.getValue(e[0]):null}return null},y.getEffectiveValue=function(e,t){var n=y.getValue(e);return e.getAttribute&&n===e.getAttribute("data-nette-empty-value")&&(n=""),t&&void 0===r[e.name]&&(r[e.name]=!0,y.validateControl(e,null,!0,t={value:n}),n=t.value,delete r[e.name]),n},y.validateControl=function(n,e,t,r,a){n=(n=n.name&&n.name.match(/\[\]$/)&&"checkbox"==n.type.toLowerCase()?n.form.elements[n.name].tagName?n:n.form.elements[n.name][0]:n).tagName?n:n[0],e=e||JSON.parse(n.getAttribute("data-nette-rules")||"[]"),r=void 0===r?{value:y.getEffectiveValue(n)}:r,a=a||!y.validateRule(n,":filled",null,r);for(var i=0,d=e.length;i<d;i++){var o=e[i],s=o.op.match(/(~)?([^?]+)/),l=o.control?n.form.elements.namedItem(o.control):n;if(o.neg=s[1],o.op=s[2],o.condition=!!o.rules,l&&(!a||o.condition||":filled"===o.op)){var u,l=l.tagName?l:l[0],s=y.validateRule(l,o.op,o.arg,n===l?r:void 0);if(null!==s)if(o.neg&&(s=!s),o.condition&&s){if(!y.validateControl(n,o.rules,t,r,":blank"!==o.op&&a))return!1}else if(!o.condition&&!s)if(!y.isDisabled(l))return t||(u=Array.isArray(o.arg)?o.arg:[o.arg],s=o.msg.replace(/%(value|\d+)/g,function(e,t){return y.getValue("value"===t?l:n.form.elements.namedItem(u[t].control))}),y.addError(l,s)),!1}}return"number"!==n.type||n.validity.valid?(t||LiveForm.removeError(n),!0):(t||y.addError(n,"Please enter a valid value."),!1)},y.validateForm=function(e,t){var n=e.form||e,r=!1;if(LiveForm.setFormProperty(n,"hasError",!1),n["nette-submittedBy"]&&null!==n["nette-submittedBy"].getAttribute("formnovalidate")){e=JSON.parse(n["nette-submittedBy"].getAttribute("data-nette-validation-scope")||"[]");if(!e.length)return!0;r=new RegExp("^("+e.join("-|")+"-)")}for(var a,i={},o=!0,s=0;s<n.elements.length;s++)if(!(a=n.elements[s]).tagName||a.tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}){if("radio"===a.type){if(i[a.name])continue;i[a.name]=!0}if(!(r&&!a.name.replace(/]\[|\[|]|$/g,"-").match(r)||y.isDisabled(a)||(o=y.validateControl(a)&&o)||LiveForm.options.showAllErrors))break}return o},y.isDisabled=function(e){if("radio"!==e.type)return e.disabled;for(var t=0,n=e.form.elements;t<n.length;t++)if(n[t].name===e.name&&!n[t].disabled)return!1;return!0},y.addError=function(t,e){var n=LiveForm.hasClass(t,LiveForm.options.disableLiveValidationClass);n&&(!e||LiveForm.getFormProperty(t.form,"hasError")||LiveForm.getFormProperty(t.form,"onLoadValidation")||alert(e)),t.focus&&!LiveForm.getFormProperty(t.form,"hasError")&&(LiveForm.focusing||(LiveForm.focusing=!0,t.focus(),setTimeout(function(){LiveForm.focusing=!1;var e=LiveForm.options.focusScreenOffsetY;!1!==e&&t.getBoundingClientRect().top<e&&s.scrollBy(0,t.getBoundingClientRect().top-e)},10))),n||LiveForm.addError(t,e)},y.validateRule=function(e,t,n,r){r=void 0===r?{value:y.getEffectiveValue(e,!0)}:r,t=(t=(t=":"===t.charAt(0)?t.substr(1):t).replace("::","_")).replace(/\\/g,"");for(var a,i=Array.isArray(n)?n.slice(0):[n],o=0,s=i.length;o<s;o++)i[o]&&i[o].control&&(a=e.form.elements.namedItem(i[o].control),i[o]=a===e?r.value:y.getEffectiveValue(a,!0));return y.validators[t]?y.validators[t](e,Array.isArray(n)?i:i[0],r.value,r):null},y.validators={filled:function(e,t,n){return!("number"!==e.type||!e.validity.badInput)||""!==n&&!1!==n&&null!==n&&(!Array.isArray(n)||!!n.length)&&(!s.FileList||!(n instanceof s.FileList)||n.length)},blank:function(e,t,n){return!y.validators.filled(e,t,n)},valid:function(e){return y.validateControl(e,null,!0)},equal:function(e,t,n){if(void 0===t)return null;function r(e){return"number"==typeof e||"string"==typeof e?""+e:!0===e?"1":""}n=Array.isArray(n)?n:[n],t=Array.isArray(t)?t:[t];e:for(var a=0,i=n.length;a<i;a++){for(var o=0,s=t.length;o<s;o++)if(r(n[a])===r(t[o]))continue e;return!1}return!0},notEqual:function(e,t,n){return void 0===t?null:!y.validators.equal(e,t,n)},minLength:function(e,t,n){if("number"===e.type){if(e.validity.tooShort)return!1;if(e.validity.badInput)return null}return n.length>=t},maxLength:function(e,t,n){if("number"===e.type){if(e.validity.tooLong)return!1;if(e.validity.badInput)return null}return n.length<=t},length:function(e,t,n){if("number"===e.type){if(e.validity.tooShort||e.validity.tooLong)return!1;if(e.validity.badInput)return null}return(null===(t=Array.isArray(t)?t:[t,t])[0]||n.length>=t[0])&&(null===t[1]||n.length<=t[1])},email:function(e,t,n){return/^("([ !#-[\]-~]|\\[ -~])+"|[-a-z0-9!#$%&'*+/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?$/i.test(n)},url:function(e,t,n,r){return/^[a-z\d+.-]+:/.test(n)||(n="http://"+n),!!/^https?:\/\/((([-_0-9a-z\u00C0-\u02FF\u0370-\u1EFF]+\.)*[0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)?[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(n)&&(r.value=n,!0)},regexp:function(e,t,n){t="string"==typeof t&&t.match(/^\/(.*)\/([imu]*)$/);try{return t&&new RegExp(t[1],t[2].replace("u","")).test(n)}catch(e){}},pattern:function(e,t,n,r,a){if("string"!=typeof t)return null;try{try{var i=new RegExp("^(?:"+t+")$",a?"ui":"u")}catch(e){i=new RegExp("^(?:"+t+")$",a?"i":"")}if(s.FileList&&n instanceof FileList){for(var o=0;o<n.length;o++)if(!i.test(n[o].name))return!1;return!0}return i.test(n)}catch(e){}},patternCaseInsensitive:function(e,t,n){return y.validators.pattern(e,t,n,null,!0)},numeric:function(e,t,n){return("number"!==e.type||!e.validity.badInput)&&/^[0-9]+$/.test(n)},integer:function(e,t,n){return("number"!==e.type||!e.validity.badInput)&&/^-?[0-9]+$/.test(n)},float:function(e,t,n,r){return("number"!==e.type||!e.validity.badInput)&&(n=n.replace(/ +/g,"").replace(/,/g,"."),!!/^-?[0-9]*\.?[0-9]+$/.test(n)&&(r.value=n,!0))},min:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)>=t},max:function(e,t,n){if("number"===e.type){if(e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)<=t},range:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow||e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return Array.isArray(t)?(null===t[0]||parseFloat(n)>=t[0])&&(null===t[1]||parseFloat(n)<=t[1]):null},submitted:function(e){return e.form["nette-submittedBy"]===e},fileSize:function(e,t,n){if(s.FileList)for(var r=0;r<n.length;r++)if(n[r].size>t)return!1;return!0},image:function(e,t,n){if(s.FileList&&n instanceof s.FileList)for(var r=0;r<n.length;r++){var a=n[r].type;if(a&&"image/gif"!==a&&"image/png"!==a&&"image/jpeg"!==a)return!1}return!0},static:function(e,t){return t}},y.toggleForm=function(e,t){for(F={},n=0;n<e.elements.length;n++)e.elements[n].tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}&&y.toggleControl(e.elements[n],null,null,!t);for(var n in F)y.toggle(n,F[n],t)},y.toggleControl=function(e,t,d,m,n){t=t||JSON.parse(e.getAttribute("data-nette-rules")||"[]"),n=void 0===n?{value:y.getEffectiveValue(e)}:n;for(var r,f=!1,c=[],g=function(){y.toggleForm(e.form,e)},a=0,p=t.length;a<p;a++){var i=t[a],v=i.op.match(/(~)?([^?]+)/),o=i.control?e.form.elements.namedItem(i.control):e;if(o){if(!1!==(r=d)){if(i.neg=v[1],i.op=v[2],null===(r=y.validateRule(o,i.op,i.arg,e===o?n:void 0)))continue;i.neg&&(r=!r),i.rules||(d=r)}if(i.rules&&y.toggleControl(e,i.rules,r,m,n)||i.toggle){if(f=!0,m)for(var h=(o.tagName?o:o[0]).name,s=o.tagName?o.form.elements:o,l=0;l<s.length;l++)s[l].name===h&&c.indexOf(s[l])<0&&(s[l].addEventListener("change",g),c.push(s[l]));for(var u in i.toggle||[])Object.prototype.hasOwnProperty.call(i.toggle,u)&&(F[u]=F[u]||(i.toggle[u]?r:!r))}}}return f},y.toggle=function(e,t,n){/^\w[\w.:-]*$/.test(e)&&(e="#"+e);for(var r=document.querySelectorAll(e),a=0;a<r.length;a++)r[a].hidden=!t},y.initForm=function(t){if(y.toggleForm(t),!t.noValidate){t.noValidate=!0,LiveForm.forms[t.id]={hasError:!1,onLoadValidation:!1},t.addEventListener("submit",function(e){y.validateForm(t)||(e.stopPropagation(),e.preventDefault())});for(var e=0;e<t.elements.length;e++)LiveForm.setupHandlers(t.elements[e]),LiveForm.processServerErrors(t.elements[e])}},y.initOnLoad=function(){y.addEvent(document,"DOMContentLoaded",function(){y.init()})},y.init=function(){for(var e=0;e<document.forms.length;e++)for(var t=document.forms[e],n=0;n<t.elements.length;n++)if(t.elements[n].getAttribute("data-nette-rules")){y.initForm(t),LiveForm.hasClass(t,"validate-on-load")&&(LiveForm.setFormProperty(t,"onLoadValidation",!0),y.validateForm(t),LiveForm.setFormProperty(t,"onLoadValidation",!1));break}y.addEvent(document.body,"click",function(e){e=e.target||e.srcElement;e.form&&e.type in{submit:1,image:1}&&(e.form["nette-submittedBy"]=e)})},y.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.inArray=function(e,t){if([].indexOf)return-1<e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},y.webalize=function(e){e=e.toLowerCase();for(var t="",n=0;n<e.length;n++)t+=y.webalizeTable[e.charAt(n)]||e.charAt(n);return t.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")},y.webalizeTable={"á":"a","ä":"a","č":"c","ď":"d","é":"e","ě":"e","í":"i","ľ":"l","ň":"n","ó":"o","ô":"o","ř":"r","š":"s","ť":"t","ú":"u","ů":"u","ý":"y","ž":"z"},y});
//# sourceMappingURL=live-form-validation.js.map
